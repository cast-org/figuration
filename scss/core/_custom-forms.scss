// Embedded icons from Open Iconic.
// Released under MIT and copyright 2014 Waybury.
// https://useiconic.com/open


// Checkboxes and Radios
// Base class takes care of all the key behavioral aspects.
.custom-control {
    position: relative;
    display: block;
    min-height: (1rem * $line-height-base);
    padding-left: $custom-control-gutter;
}

.custom-control-inline {
    display: inline-flex;
    margin-right: $custom-control-spacer-x;
}

.custom-control-input {
    position: absolute;
    // Place input behind the label
    clip: rect(0, 0, 0, 0);
    pointer-events: none;
    opacity: 0;

    &:checked ~ .custom-control-label::before {
        color: $custom-control-checked-indicator-color;
        background-color: $custom-control-checked-indicator-bg;
        border: 0;
        @include box-shadow($custom-control-checked-indicator-box-shadow);
    }

    &:focus ~ .custom-control-label::before {
        box-shadow: $custom-control-focus-indicator-box-shadow;
    }

    &:active:not(:disabled) ~ .custom-control-label::before {
        color: $custom-control-active-indicator-color;
        background-color: $custom-control-active-indicator-bg;
    }

    &:disabled {
        ~ .custom-control-label {
            color: $custom-control-disabled-description-color;

            &::before {
                opacity: $custom-control-disabled-indicator-opacity;
            }
        }
    }
}

// Custom control indicators
// Generate custom controls from pseudo-elements.
.custom-control-label {
    position: relative;
    margin-bottom: 0;

    // Background (color and border)
    &::before {
        position: absolute;
        top: (($line-height-base - $custom-control-indicator-size) / 2);
        left: -$custom-control-gutter;
        display: block;
        width: $custom-control-indicator-size;
        height: $custom-control-indicator-size;
        pointer-events: none;
        content: "";
        user-select: none;
        background-color: $custom-control-indicator-bg;
        border: $custom-control-indicator-border-width solid $custom-control-indicator-border-color;
        @include box-shadow($custom-control-indicator-box-shadow);
    }

    // Foreground (icon)
    &::after {
        position: absolute;
        top: (($line-height-base - $custom-control-indicator-size) / 2);
        left: -$custom-control-gutter;
        display: block;
        width: $custom-control-indicator-size;
        height: $custom-control-indicator-size;
        content: "";
        background-repeat: no-repeat;
        background-position: center center;
        background-size: $custom-control-indicator-bg-size;
    }
}

// Checkboxes
// Tweak just a few things for checkboxes.
.custom-checkbox {
    .custom-control-label::before {
        @include border-radius($custom-checkbox-radius);
    }

    .custom-control-input:checked ~ .custom-control-label {
        &::after {
            background-image: $custom-checkbox-checked-icon;
        }
    }

    .custom-control-input:indeterminate ~ .custom-control-label {
        &::before {
            background-color: $custom-checkbox-indeterminate-bg;
            @include box-shadow($custom-checkbox-indeterminate-box-shadow);
        }
        &::after {
            background-image: $custom-checkbox-indeterminate-icon;
        }
    }
}

// Radios
// Tweak just a few things for radios.
.custom-radio {
    .custom-control-label::before {
        border-radius: $custom-radio-radius;
    }

    .custom-control-input:checked ~ .custom-control-label {
        &::after {
            background-image: $custom-radio-checked-icon;
        }
    }
}

// Select
// Replaces the browser default select with a custom one.
.custom-select {
    display: block;
    width: 100%;
    height: $input-height-outer;
    padding: $input-padding-y ($input-padding-x + $custom-select-indicator-padding) $input-padding-y $input-padding-x;
    color: $input-color;
    vertical-align: middle;
    background: $input-bg $custom-select-indicator no-repeat right $input-padding-x center;
    background-size: $custom-select-indicator-size;
    border: $input-border-width solid $input-border-color;
    @if $enable-rounded {
        border-radius: $input-border-radius;
    } @else {
        border-radius: 0;
    }
    @include box-shadow($input-box-shadow);
    appearance: none;

    &:focus {
        &::-ms-value {
            // For visual consistency with other platforms/browsers,
            // suppress the default white text on blue background highlight given to
            // the selected option text when the (still closed) <select> receives focus
            // in IE and (under certain conditions) Edge.
            // See https://github.com/twbs/bootstrap/issues/19398.
            color: $input-focus-color;
            background-color: $input-focus-bg;
        }
    }

    &[size]:not([size="1"]),
    &[multiple] {
        height: auto;
        background-image: none;
    }

    &:disabled {
        color: $input-disabled-color;
        background-color: $input-disabled-bg;
    }

    // Hides the default caret in IE11
    &::-ms-expand {
        opacity: 0;
    }
}

// Select sizes
@if $enable-sizing {
    @each $size, $dims in $input-sizes {
        $sz-font-size:     map-get($dims, "font-size");
        $sz-line-height:   map-get($dims, "line-height");
        $sz-padding-y:     map-get($dims, "padding-y");
        $sz-padding-x:     map-get($dims, "padding-x");
        $sz-border-radius: map-get($dims, "border-radius");
        $sz-inner-height:  (($sz-font-size * $sz-line-height) + ($sz-padding-y * 2));
        $sz-outer-height:  calc(#{$sz-inner-height} + #{($border-width * 2)});

        // stylelint-disable declaration-block-no-duplicate-properties
        .custom-select-#{$size} {
            height: $sz-outer-height;
            padding: $sz-padding-y $sz-padding-x;
            padding-right: ($sz-padding-x + $custom-select-indicator-padding);
            @include font-size($sz-font-size);
            line-height: $sz-line-height;
            //background-position: right $sz-padding-x center;
            @include border-radius($sz-border-radius);
        }
        // stylelint-enable declaration-block-no-duplicate-properties
    }
}

// File
// Custom file input.
.custom-file {
    position: relative;
    display: inline-block;
    width: 100%;
    height: $input-height-outer;
    margin-bottom: 0;
}

.custom-file-input {
    position: relative;
    z-index: 2;
    width: 100%;
    height: $input-height-outer;
    margin: 0;
    opacity: 0;

    &:focus-within ~ .custom-file-label, // Firefox workaround
    &:focus ~ .custom-file-label {
        color: $input-focus-color;
        background-color: $input-focus-bg;
        border-color: $input-focus-border-color;
        outline: 0;
        // Avoid using mixin so we can pass custom focus shadow properly
        @if $enable-shadows {
            box-shadow: $input-box-shadow, $input-focus-box-shadow;
        } @else {
            box-shadow: $input-focus-box-shadow;
        }

        &::after {
            border-color: $input-focus-border-color;
            border-left-color: $input-border-color;
        }
    }

    &:disabled ~ .custom-file-label {
        color: $input-disabled-color;
        background-color: $input-disabled-bg;

        &::after {
            opacity: $custom-file-button-disabled-opacity;
        }
    }

    @each $lang, $text in $custom-file-text {
        &:lang(#{$lang}) ~ .custom-file-label::after {
            content: $text;
        }
    }
}

.custom-file-label {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    z-index: 2;
    height: $input-height-outer;
    padding: $input-padding-y $input-padding-x;
    overflow: hidden;
    line-height: $input-line-height;
    color: $input-color;
    background-color: $input-bg;
    border: $input-border-width solid $input-border-color;
    @include border-radius($input-border-radius);
    @include box-shadow($input-box-shadow);

    &::after {
        position: absolute;
        top: 0;
        right: 0;
        z-index: 2;
        display: block;
        height: $input-height-outer;
        padding: $input-padding-y $input-padding-x;
        line-height: $input-line-height;
        color: $custom-file-button-color;
        content: "Browse";
        background-color: $custom-file-button-bg;
        border-left: $input-border-width solid $input-border-color;
        @include box-shadow($btn-box-shadow);
    }
}

//Color
// Custom color input
.custom-color {
    display: block;
    width: auto;
    min-width: $input-height-inner;
    height: $input-height-inner;
    @include font-size($font-size-base);
    line-height: $input-line-height;
    color: $input-color;
    background-color: $input-bg;
    background-image: none;
    border: $input-border-width solid $input-border-color;

    @include border-radius($input-border-radius);
    @include box-shadow($input-box-shadow);
}

// Consolidate some items for filesize savings
// Focus
.custom-select,
.custom-color {
    @include form-control-focus();
}

// Transition
.custom-control-label::before,
.custom-select,
.custom-file-label,
.custom-color {
    @include transition($input-transition);
}
