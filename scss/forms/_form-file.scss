// File input
@if $enable-form and $enable-form-file {
    .custom-file {
        position: relative;
        display: inline-block;
        width: 100%;
        height: calc-input-height-outer($input-padding-y, $input-line-height);
        margin-bottom: 0;
    }

    .custom-file-input {
        position: relative;
        z-index: 2;
        width: 100%;
        height: calc-input-height-outer($input-padding-y, $input-line-height);
        margin: 0;
        opacity: 0;

        &:focus-within ~ .custom-file-label, // Firefox workaround
        &:focus ~ .custom-file-label {
            color: $input-focus-color;
            background-color: $input-focus-bg;
            border-color: $input-focus-border-color;
            outline: 0;
            // Avoid using mixin so we can pass custom focus shadow properly
            @if $enable-shadows {
                box-shadow: $input-box-shadow, $input-focus-box-shadow;
            } @else {
                box-shadow: $input-focus-box-shadow;
            }

            &::after {
                border-color: inherit;
            }
        }

        &:disabled ~ .custom-file-label {
            color: $input-disabled-color;
            background-color: $input-disabled-bg;

            &::after {
                opacity: $custom-file-button-disabled-opacity;
            }
        }

        @each $lang, $text in $custom-file-text {
            &:lang(#{$lang}) ~ .custom-file-label::after {
                content: $text;
            }
        }

        ~ .custom-file-label[data-browse]::after {
            content: attr(data-browse) !important;  // stylelint-disable-line declaration-no-important
        }
    }

    .custom-file-label {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        z-index: 1;
        height: calc-input-height-outer($input-padding-y, $input-line-height);
        padding: $input-padding-y $input-padding-x;
        overflow: hidden;
        font-family: $input-font-family;
        @include font-size($input-font-size);
        font-weight: $input-font-weight;
        line-height: $input-line-height;
        color: $input-color;
        background-color: $input-bg;
        border: $input-border-width solid $input-border-color;
        @include border-radius($input-border-radius);
        @include box-shadow($input-box-shadow);
        @include transition($input-transition);

        &::after {
            position: absolute;
            top: 0;
            right: 0;
            z-index: 2;
            display: block;
            height: calc-input-height-outer($input-padding-y, $input-line-height);
            padding: $input-padding-y $input-padding-x;
            font-family: $btn-font-family;
            line-height: $input-line-height;
            color: $custom-file-button-color;
            content: "Browse";
            background-color: $custom-file-button-bg;
            border-left: $input-border-width solid $input-border-color;
            @include box-shadow($btn-box-shadow);
        }
    }
}
