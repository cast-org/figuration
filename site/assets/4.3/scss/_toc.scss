@use "../../../../scss/mixins/breakpoints";
@use "../../../../scss/mixins/font-size";
@use "../../../../scss/mixins/hover";
@use "../../../../scss/settings";

.cf-toc-align {
    margin-right: settings.$grid-gutter-width * -.5;
    margin-left: settings.$grid-gutter-width * -.5;
}

.cf-content-lead,
.cf-content-toc,
.cf-content {
    padding-right: 1rem;
    padding-left: 1rem;


    @include breakpoints.media-breakpoint-up(md) {
        padding-right: 1.5rem;
        padding-left: 1.5rem;
    }

    @include breakpoints.media-breakpoint-up(lg) {
        padding-right: 2rem;
        padding-left: 2rem;
    }
}

.cf-toc {
    ol {
        display: flex;
        flex-direction: column;
        min-width: 0;
        padding: 0;
        margin-left: settings.$list-margin-left;
        list-style: disc;
        @include font-size.font-size(.9375rem);

        ol {
            margin: .125rem 0 -.125rem settings.$list-margin-left;
        }
    }

    li {
        margin-bottom: .125rem;
    }
}

@include breakpoints.media-breakpoint-up(lg) {
    .cf-sidebar {
        width: 20%;
    }
    .cf-main {
        width: 80%;
    }
}

@supports (display: grid) {
    .cf-toc-align {
        @include breakpoints.media-breakpoint-up(lg) {
            display: grid;
            grid-template-areas: "lead toc" "content toc";
            grid-template-columns: 3.25fr 1fr;
            grid-template-rows: auto 1fr;
        }
        @include breakpoints.media-breakpoint-up(xl) {
            grid-template-columns: 4fr 1fr;
        }
    }

    .cf-content-toc {
        grid-area: toc;
    }
    .cf-content-lead {
        grid-area: lead;
    }
    .cf-content {
        grid-area: content;
        min-width: 1px;
    }

    @include breakpoints.media-breakpoint-up(lg) {
        .cf-content-toc {
            padding: 1rem;
            border-left: 1px solid settings.$border-color;

            @supports (position: sticky) {
                position: sticky;
                top: 3.375rem;
                max-height: subtract(100vh, 3.375rem);
                overflow-x: visible;
                overflow-y: auto;
            }
        }
    }

    .cf-toc {
        @include breakpoints.media-breakpoint-up(lg) {
            ol {
                margin-left: 0;
                list-style: none;
                @include font-size.font-size(.875rem);
            }

            a {
                color: palette(settings.$text-muted, 600);
                text-decoration: none;


                @include hover.hover-focus() {
                    color: palette(settings.$text-muted, 700);
                    text-decoration: underline;
                }
            }

            .active {
                background-color: palette(settings.$info, 100);
            }
        }
    }
}
